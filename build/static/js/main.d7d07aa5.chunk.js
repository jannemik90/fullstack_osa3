(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t(5),o=t(0),u=t.n(o),c=t(12),l=t.n(c),i=function(e){var n=e.value,t=e.onChange;return u.a.createElement("div",null,u.a.createElement("p",null,"rajaa n\xe4ytett\xe4vi\xe4:"),u.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.persons;return u.a.createElement("div",null,n)},f=function(e){var n=e.formOnSubmit,t=e.nameValue,a=e.nameHandler,r=e.numberValue,o=e.numberHandler;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,u.a.createElement("p",null,"nimi:"),u.a.createElement("input",{value:t,onChange:a})),u.a.createElement("div",null,u.a.createElement("p",null,"numero:"),u.a.createElement("input",{value:r,onChange:o})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},s=t(3),d=t.n(s),v="/api/persons",b=function(){return d.a.get(v).then(function(e){return e.data})},p=function(e){return d.a.post(v,e).then(function(e){return e.data})},E=function(e){return d.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},h=function(e,n){return d.a.put("".concat(v,"/").concat(e),n).then(function(e){return e.data})},g=function(e){var n=e.person,t=e.onClick;return u.a.createElement("div",null,u.a.createElement("p",null,n.name," ",n.number," "),u.a.createElement("button",{onClick:t},"Poista"))},j=function(e){var n=e.message,t={backgroundColor:"darkgreen",color:"white",borderRadius:"20px",padding:"20px"};return e.isErrorMessage&&(t=Object(r.a)({},t,{backgroundColor:"red"})),""===n?null:u.a.createElement("div",{style:t},u.a.createElement("p",null,n))},k=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],l=Object(o.useState)(""),s=Object(a.a)(l,2),d=s[0],v=s[1],k=Object(o.useState)(""),w=Object(a.a)(k,2),O=w[0],C=w[1],S=Object(o.useState)(""),y=Object(a.a)(S,2),L=y[0],H=y[1],P=Object(o.useState)(""),V=Object(a.a)(P,2),x=V[0],J=V[1],M=Object(o.useState)(!0),B=Object(a.a)(M,2),D=B[0],F=B[1];Object(o.useEffect)(function(){b().then(function(e){c(e)})},[]);var I=function(e,n){J(e),F(n),setTimeout(function(){F(""),J("")},5e3)},N=t.map(function(e){return e.name.toLowerCase().includes(L.toLowerCase())?u.a.createElement(g,{key:e.name,person:e,onClick:function(){return n=e.id,a=e.name,void(window.confirm("Poistetaanko ".concat(a))&&E(n).then(function(e){var r=t.filter(function(e){return e.id!==n});console.log(r),c(r),I("Poistettu henkilo ".concat(a))}).catch(function(e){I("Henkilo ".concat(a," oli jo poistettu palvelimelta"),!0),c(t.filter(function(e){return e.id!==n}))}));var n,a}}):u.a.createElement(u.a.Fragment,null)});return u.a.createElement("div",null,u.a.createElement(j,{message:x,isErrorMessage:D}),u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(i,{value:L,onChange:function(e){H(e.target.value)}}),u.a.createElement(f,{formOnSubmit:function(e){e.preventDefault();var n={name:d,number:O};!function(e,n){var t=!1;return n.forEach(function(n){e.name.toLowerCase()===n.name.toLowerCase()&&(t=!0)}),t}(n,t)?function(e){p(e).then(function(e){c(t.concat(e)),v(""),C(""),I("Lis\xe4tty henkilo ".concat(e.name))})}(n):window.confirm("".concat(n.name," on jo luettelossa, korvataanko vanha uudella numerolla?"))&&function(e){var n=t.find(function(n){return n.name.toLowerCase()===e.name.toLowerCase()}),a=Object(r.a)({},n,{number:O});h(n.id,a).then(function(e){c(t.map(function(n){return n.id!==e.id?n:e})),v(""),C(""),I("P\xe4ivitetty henkil\xf6n ".concat(e.name," numero"))}).catch(function(a){I("Henkilo ".concat(e.name," oli jo poistettu palvelimelta"),!0),c(t.filter(function(e){return e.id!==n.id}))})}(n)},nameValue:d,nameHandler:function(e){console.log(e.target.value),v(e.target.value)},numberValue:O,numberHandler:function(e){C(e.target.value)}}),u.a.createElement("h2",null,"Numerot"),u.a.createElement(m,{persons:N}))};l.a.render(u.a.createElement(k,null),document.getElementById("root"));n.default=k}},[[13,1,2]]]);
//# sourceMappingURL=main.d7d07aa5.chunk.js.map